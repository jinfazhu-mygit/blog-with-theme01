(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{692:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"redux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux"}},[t._v("#")]),t._v(" Redux")]),t._v(" "),a("ul",[a("li",[t._v("Redux就"),a("strong",[t._v("是一个帮助我们管理State的容器")]),t._v("："),a("strong",[t._v("Redux是JavaScript的状态容器")]),t._v("，提供了"),a("strong",[t._v("可预测的状态管理")])]),t._v(" "),a("li",[t._v("Redux除了和React一起使用之外，它"),a("strong",[t._v("也可以和其他界面库一起来使用（比如Vue）")]),t._v("，并且它非常小（包括依赖在内，只有2kb）")]),t._v(" "),a("li",[a("strong",[t._v("store")]),t._v("存储，将数据存入至一个公共的对象中，进行数据共享")]),t._v(" "),a("li",[t._v("Redux要求"),a("strong",[t._v("所有数据的变化")]),t._v("，必须"),a("strong",[t._v("通过派发（dispatch）action来更新")]),t._v("；")]),t._v(" "),a("li",[t._v("如何"),a("strong",[t._v("将state和action联系在一起")]),t._v("？"),a("strong",[t._v("reducer")]),t._v(" "),a("ul",[a("li",[t._v("reducer是一个纯函数")]),t._v(" "),a("li",[a("strong",[t._v("reducer")]),t._v("做的事情就是"),a("strong",[t._v("将传入的state和action结合起来生成一个新的state")])])])])]),t._v(" "),a("h3",{attrs:{id:"redux三大原则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux三大原则"}},[t._v("#")]),t._v(" Redux三大原则")]),t._v(" "),a("h4",{attrs:{id:"单一数据源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单一数据源"}},[t._v("#")]),t._v(" 单一数据源")]),t._v(" "),a("ul",[a("li",[t._v("整个应用程序的state被存储在一颗object tree中，并且这个object tree只存储在一个 store 中：")]),t._v(" "),a("li",[t._v("Redux并没有强制让我们不能创建多个Store，但是那样做并不利于数据的维护；")]),t._v(" "),a("li",[t._v("单一的数据源可以让整个应用程序的state变得方便维护、追踪、修改；")])]),t._v(" "),a("h4",{attrs:{id:"state是只读的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state是只读的"}},[t._v("#")]),t._v(" State是只读的")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("唯一修改State的方法一定是触发action")]),t._v("，不要试图在其他地方通过任何的方式来修改State：")])]),t._v(" "),a("li",[a("p",[t._v("这样就确保了View或网络请求都不能直接修改state，它们"),a("strong",[t._v("只能通过action")]),t._v("来描述自己想要如何修改state；")])]),t._v(" "),a("li",[a("p",[t._v("这样可以"),a("strong",[t._v("保证所有的修改都被集中化处理")]),t._v("，并且按照严格的顺序来执行，所以不需要担心race condition（竟态）的问题；")])])]),t._v(" "),a("h4",{attrs:{id:"使用纯函数来执行修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用纯函数来执行修改"}},[t._v("#")]),t._v(" 使用纯函数来执行修改")]),t._v(" "),a("ul",[a("li",[t._v("通过"),a("strong",[t._v("reducer将 旧state和 actions联系在一起")]),t._v("，并且返回一个新的State：")]),t._v(" "),a("li",[t._v("随着应用程序的复杂度增加，我们可以"),a("strong",[t._v("将reducer拆分成多个小的reducers")]),t._v("，分别"),a("strong",[t._v("操作不同state tree的一部分")]),t._v("；")]),t._v(" "),a("li",[t._v("但是"),a("strong",[t._v("所有的reducer都应该是纯函数")]),t._v("，不能产生任何的副作用；")])]),t._v(" "),a("h3",{attrs:{id:"redux的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux的使用"}},[t._v("#")]),t._v(" Redux的使用")]),t._v(" "),a("ul",[a("li",[t._v("安装")])]),t._v(" "),a("div",{staticClass:"language-cmd line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install redux --save\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("1."),a("strong",[t._v("创建一个对象，作为我们要保存的状态")]),t._v("：")]),t._v(" "),a("li",[t._v("2."),a("strong",[t._v("创建Store来存储这个state")]),t._v(" "),a("ul",[a("li",[t._v("创建store时必须创建reducer；")]),t._v(" "),a("li",[t._v("我们可以通过 "),a("strong",[t._v("store.getState()")]),t._v(" 来获取当前的state")])])]),t._v(" "),a("li",[t._v("3.通过"),a("strong",[t._v("action来修改state")]),t._v(" "),a("ul",[a("li",[t._v("通过"),a("strong",[t._v("dispatch来派发action")]),t._v("；")]),t._v(" "),a("li",[t._v("通常"),a("strong",[t._v("action中都会有type属性，也可以携带其他的数据")]),t._v("；")])])]),t._v(" "),a("li",[t._v("4.修改"),a("strong",[t._v("reducer中的处理代码")]),t._v(" "),a("ul",[a("li",[t._v("这里一定要记住，reducer是一个纯函数，不需要直接修改state；")]),t._v(" "),a("li",[t._v("后面我会讲到直接修改state带来的问题；")])])]),t._v(" "),a("li",[t._v("5.可以"),a("strong",[t._v("在派发action之前，监听store的变化")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// react17 未封装写法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" redux "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.store 2.action 3.reducer")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化的数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" initialState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reducer")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reducer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initialState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'INCREMENT'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DECREMENT'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ADD_NUMBER'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SUB_NUMBER'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// store")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在创建store的时候传入一个reducer纯函数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const store = redux.createStore(); // 弃用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" redux"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 订阅store的修改")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'counter:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// actions")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" action1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INCREMENT"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" action2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DECREMNT"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" action3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ADD_NUMBER"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" action4 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SUB_NUMBER"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 派发action，实际上就是执行reducer纯函数")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br")])]),a("h3",{attrs:{id:"redux对比mobx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux对比mobx"}},[t._v("#")]),t._v(" Redux对比mobx")]),t._v(" "),a("h4",{attrs:{id:"共同点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#共同点"}},[t._v("#")]),t._v(" 共同点")]),t._v(" "),a("ul",[a("li",[t._v("为了"),a("strong",[t._v("解决状态管理混乱")]),t._v("、无法有效同步的问题，"),a("strong",[t._v("统一维护管理应用状态")])]),t._v(" "),a("li",[t._v("某一状态只有一个可信数据来源（通常命名为store，指状态容器）")]),t._v(" "),a("li",[t._v("操作更新状态方式统一，并且可控（通常以action方式提供更新状态的途径）")]),t._v(" "),a("li",[t._v("支持将store与React组件连接，如"),a("code",[t._v("react-redux")]),t._v("，"),a("code",[t._v("mobx-react")])])]),t._v(" "),a("h4",{attrs:{id:"区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#区别"}},[t._v("#")]),t._v(" 区别")]),t._v(" "),a("p",[t._v("Redux更多的是遵循Flux模式的一种实现，是一个 JavaScript 库，它关注点主要是以下几方面∶")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Reducer∶ "),a("strong",[t._v("定义应用状态如何响应不同动作（action）")]),t._v("，如何更新状态;")])]),t._v(" "),a("li",[a("p",[t._v("Action∶ 一个JavaScript对象，"),a("strong",[t._v("描述动作相关信息")]),t._v("，主要包含type属性和payload属性∶")])]),t._v(" "),a("li",[a("p",[t._v("Store∶ 管理action和reducer及其关系的对象，主要提供以下功能∶")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("维护应用状态并支持访问状态(getState())")]),t._v(";")]),t._v(" "),a("li",[a("strong",[t._v("支持监听action的分发，更新状态(dispatch(action))")]),t._v(";")]),t._v(" "),a("li",[t._v("支持"),a("strong",[t._v("订阅store的变更(subscribe(listener))")]),t._v(";")])])]),t._v(" "),a("li",[a("p",[t._v("异步流∶ 由于Redux所有对store状态的变更，都应该通过action触发，"),a("strong",[t._v("异步任务")]),t._v("（通常都是业务或获取数据任务）也不例外，而为了不将业务或数据相关的任务混入React组件中，就"),a("strong",[t._v("需要使用其他框架配合管理异步任务流程，如redux-thunk，redux-saga等")]),t._v(";")])])]),t._v(" "),a("p",[t._v("Mobx是一个"),a("strong",[t._v("透明函数响应式编程的状态管理库")]),t._v("，它使得状态管理简单可伸缩∶")]),t._v(" "),a("ul",[a("li",[t._v("Action∶"),a("strong",[t._v("定义改变状态的动作函数")]),t._v("，包括"),a("strong",[t._v("如何变更状态")]),t._v(";")]),t._v(" "),a("li",[t._v("Store∶ 集中"),a("strong",[t._v("管理模块状态（State）和动作(action)")])]),t._v(" "),a("li",[t._v("Derivation（衍生）∶ 从应用状态中派生而出，且没有任何其他影响的数据")])]),t._v(" "),a("h4",{attrs:{id:"对比总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对比总结"}},[t._v("#")]),t._v(" 对比总结")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("redux")]),t._v("将数据保存在"),a("strong",[t._v("单一的store")]),t._v("中，"),a("code",[t._v("mobx")]),t._v("将数据保存在"),a("strong",[t._v("分散的多个store")]),t._v("中")]),t._v(" "),a("li",[t._v("redux使用"),a("code",[t._v("plain object")]),t._v("保存数据，需要手动处理变化后的操作;mobx适用"),a("strong",[t._v("observable")]),t._v("保存数据，"),a("strong",[t._v("数据变化后自动处理响应的操作")])]),t._v(" "),a("li",[a("strong",[t._v("redux使用不可变状态")]),t._v("，这意味着状态是只读的，"),a("strong",[t._v("不能直接去修改它")]),t._v("，"),a("strong",[t._v("而是应该返回一个新的状态")]),t._v("，**同时使用纯函数；**mobx中的状态是可变的，可以直接对其进行修改")]),t._v(" "),a("li",[t._v("mobx相对来说比较简单，在其中有很多的抽象，"),a("strong",[t._v("mobx更多的使用面向对象的编程思维")]),t._v(";redux会比较复杂，因为其中的"),a("strong",[t._v("函数式编程思想")]),t._v("掌握起来不是那么容易，同时需要"),a("strong",[t._v("借助一系列的中间件(redux-thunk、redux-saga)来处理异步和副作用")])]),t._v(" "),a("li",[t._v("mobx中有更多的抽象和封装，调试会比较困难，同时结果也难以预测;而redux提供能够进行时间回溯的开发工具，同时其纯函数以及更少的抽象，让调试变得更加的容易")])]),t._v(" "),a("h3",{attrs:{id:"redux对比vuex"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux对比vuex"}},[t._v("#")]),t._v(" Redux对比Vuex")]),t._v(" "),a("h4",{attrs:{id:"相同点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相同点"}},[t._v("#")]),t._v(" 相同点")]),t._v(" "),a("ul",[a("li",[t._v("通过state共享数据")]),t._v(" "),a("li",[t._v("流程一致：定义全局state，触发，修改state")]),t._v(" "),a("li",[t._v("原理相似，通过全局注入store")])]),t._v(" "),a("h4",{attrs:{id:"不同点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不同点"}},[t._v("#")]),t._v(" 不同点")]),t._v(" "),a("ul",[a("li",[t._v("从实现原理上来说：\n"),a("ul",[a("li",[a("strong",[t._v("Redux 使用的是不可变数据")]),t._v("，"),a("strong",[t._v("而Vuex的数据是可变的")]),t._v("。"),a("code",[t._v("Redux")]),t._v("每次都是用"),a("strong",[t._v("新的state替换旧的state")]),t._v("，而"),a("code",[t._v("Vuex")]),t._v("是"),a("strong",[t._v("直接修改")])]),t._v(" "),a("li",[t._v("Redux 在检测数据变化的时候，是通过 "),a("strong",[t._v("diff 的方式比较差异")]),t._v("的，而Vuex其实和Vue的原理一样，是通过 getter/setter来比较的")])])]),t._v(" "),a("li",[t._v("从表现层来说：\n"),a("ul",[a("li",[t._v("vuex定义了"),a("strong",[t._v("state、getter、mutation、action")]),t._v("四个对象；redux定义了"),a("strong",[t._v("state、reducer、action")]),t._v("。")]),t._v(" "),a("li",[t._v("vuex中state统一存放，方便理解；redux state依赖所有reducer的初始值")]),t._v(" "),a("li",[t._v("vuex有getter,目的是快捷得到state；redux没有这层，react-redux mapStateToProps参数做了这个工作。")]),t._v(" "),a("li",[t._v("vuex中mutation只是单纯"),a("strong",[t._v("赋值")]),t._v("(很浅的一层)；redux中reducer只是单纯"),a("strong",[t._v("设置新state")]),t._v("(很浅的一层)。他俩作用类似，但书写方式不同")]),t._v(" "),a("li",[t._v("vuex中action有较为复杂的异步ajax请求；redux中action中可简单可复杂,简单就直接发送数据对象（{type:xxx, your-data}）,复杂需要调用异步ajax（依赖redux-thunk插件）。")]),t._v(" "),a("li",[t._v("vuex触发方式有两种"),a("strong",[t._v("commit同步和dispatch异步")]),t._v("；"),a("strong",[t._v("redux同步和异步都使用dispatch")])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);