(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{675:function(s,t,a){"use strict";a.r(t);var e=a(3),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"样式隔离方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#样式隔离方案"}},[s._v("#")]),s._v(" 样式隔离方案")]),s._v(" "),a("blockquote",[a("p",[s._v("本文主要讲css各种解决方案，包括，"),a("code",[s._v("BEM")]),s._v("、"),a("code",[s._v("css modules")]),s._v("、"),a("code",[s._v("Css in Js")]),s._v("、"),a("code",[s._v("预处理器")]),s._v("、"),a("code",[s._v("Shadow DOM")]),s._v("，"),a("code",[s._v("Vue Scoped")]),s._v("通过分析各项方案的"),a("strong",[s._v("产生背景、带来的好处以及存在的一些问题")]),s._v("来帮助大家判断自己的"),a("code",[s._v("项目中适合使用哪种那方案")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/10/21/x6Xvhd.png",alt:"x6Xvhd.png"}})]),s._v(" "),a("ul",[a("li",[s._v("BEM：样式类名命名思想")]),s._v(" "),a("li",[s._v("CSS Modules："),a("strong",[s._v("className={style.title}")]),s._v("，依赖于css-loader")]),s._v(" "),a("li",[s._v("CSS in JS：\n"),a("ul",[a("li",[a("strong",[s._v("styled-components")]),s._v("："),a("strong",[s._v("const StyleDom = styled.div``")]),s._v("；")]),s._v(" "),a("li",[s._v("Radium："),a("strong",[s._v("style.classname")]),s._v(" 全"),a("strong",[s._v("转为内联样式(行内样式)")]),s._v("；")])])]),s._v(" "),a("li",[s._v("预处理器："),a("strong",[s._v("scss、sass、less、Stylus、PostCSS")])]),s._v(" "),a("li",[s._v("Shadow DOM")]),s._v(" "),a("li",[s._v("vue scoped")])]),s._v(" "),a("h2",{attrs:{id:"一、bem"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、bem"}},[s._v("#")]),s._v(" 一、BEM")]),s._v(" "),a("h3",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("p",[s._v("BEM是"),a("code",[s._v("一种css命名方法论")]),s._v("，意思是块（Block）、元素（Element）、修饰符（Modifier）的简写")]),s._v(" "),a("p",[s._v("这种命名方法让CSS便于统一团队开发规范和方便维护")]),s._v(" "),a("p",[s._v("以 "),a("code",[s._v(".block__element--modifier")]),s._v("或者说"),a("code",[s._v("block-name__element-name--modifier-name")]),s._v("形式命名，命名有含义，也就是"),a("code",[s._v("模块名 + 元素名 + 修饰器名")])]),s._v(" "),a("p",[s._v("社区里面对BEM命名的褒贬不一，但是对其的思想基本上还是认同的，所以"),a("strong",[s._v("可以用它的思想")]),s._v("，"),a("strong",[s._v("不一定要用它的命名方式")])]),s._v(" "),a("h4",{attrs:{id:"应用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[s._v("#")]),s._v(" 应用场景")]),s._v(" "),a("p",[s._v("BEM思想通常用于"),a("code",[s._v("组件库")]),s._v("，业务代码中"),a("code",[s._v("结合less等预处理器")])]),s._v(" "),a("h4",{attrs:{id:"优缺点分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优缺点分析"}},[s._v("#")]),s._v(" 优缺点分析")]),s._v(" "),a("p",[a("strong",[s._v("优点")])]),s._v(" "),a("ol",[a("li",[s._v("可读性高，可维护性高")])]),s._v(" "),a("p",[a("strong",[s._v("缺点")])]),s._v(" "),a("ol",[a("li",[s._v("命名太长(不算缺点，提高了代码的可读性)，体积增大，gzip可忽略")])]),s._v(" "),a("h2",{attrs:{id:"二、css-modules-依赖于css-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、css-modules-依赖于css-loader"}},[s._v("#")]),s._v(" 二、CSS modules(依赖于css-loader)")]),s._v(" "),a("h3",{attrs:{id:"简介-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介-2"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("p",[s._v("什么是"),a("code",[s._v("CSS Modules")]),s._v("？")]),s._v(" "),a("p",[s._v("顾名思义，"),a("code",[s._v("css-modules 将 css 代码模块化")]),s._v("，可以避免"),a("code",[s._v("本模块样式被污染")]),s._v("，并且可以很方便的复用 css 代码")]),s._v(" "),a("p",[s._v("根据"),a("code",[s._v("CSS Modules")]),s._v("在Gihub上的"),a("a",{attrs:{href:"https://github.com/css-modules/css-modules",target:"_blank",rel:"noopener noreferrer"}},[s._v("项目"),a("OutboundLink")],1),s._v("，它被解释为：")]),s._v(" "),a("blockquote",[a("p",[s._v("所有的类名和动画名称默认都有各自的作用域的CSS文件。")])]),s._v(" "),a("p",[s._v("所以"),a("code",[s._v("CSS Modules")]),s._v("既不是官方标准，也不是浏览器的特性，而是"),a("strong",[s._v("在构建步骤（例如使用Webpack，记住css-loader）中对CSS类名和选择器限定作用域的一种方式")]),s._v("（类似于命名空间）")]),s._v(" "),a("p",[s._v("依赖"),a("code",[s._v("webpack css-loader")]),s._v("，配置如下，现在webpack已经默认开启CSS modules功能了scss,sass类似")]),s._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /.css$/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("loader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"style-loader!css-loader?modules"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("我们先看一个"),a("strong",[s._v("示例：")])]),s._v(" "),a("p",[s._v("将"),a("code",[s._v("CSS")]),s._v("文件"),a("code",[s._v("style.css")]),s._v("引入为"),a("code",[s._v("style")]),s._v("对象后，通过"),a("code",[s._v("style.title")]),s._v("的方式使用"),a("code",[s._v("title class")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-jsx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" style "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./style.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("className")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v(" // 通过style.类名，给元素添加样式\n      I am KaSong.\n    ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("对应"),a("code",[s._v("style.css")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".title")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("打包工具会将"),a("code",[s._v("style.title")]),s._v("编译为"),a("code",[s._v("带哈希的字符串")])]),s._v(" "),a("div",{staticClass:"language-jsx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("h1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("_3zyde4l1yATCOkgn-DBWEL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n  Hello World\n")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("同时"),a("code",[s._v("style.css")]),s._v("也会编译：")]),s._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[s._v("._3zyde4l1yATCOkgn-DBWEL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("这样，就产生了独一无二的"),a("code",[s._v("class")]),s._v("，解决了"),a("code",[s._v("CSS")]),s._v("模块化的问题")]),s._v(" "),a("p",[s._v("使用了 CSS Modules 后，就相当于给每个 class 名外加加了一个 "),a("code",[s._v(":local")]),s._v("，以此来实现样式的局部化，如果你想切换到全局模式，使用对应的 "),a("code",[s._v(":global")]),s._v("。")]),s._v(" "),a("p",[a("code",[s._v(":local")]),s._v(" 与 "),a("code",[s._v(":global")]),s._v(" 的区别是 "),a("strong",[s._v("CSS Modules 只会对 "),a("code",[s._v(":local")]),s._v(" 块的 class 样式做 "),a("code",[s._v("localIdentName")]),s._v(" 规则处理，"),a("code",[s._v(":global")]),s._v(" 的样式编译后不变")])]),s._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".title")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(":global(.title)")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" green"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("可以看到，依旧使用CSS，但使用JS来管理样式依赖， 最大化地结合现有 CSS 生态和 JS 模块化能力，发布时依旧编译出单独的 JS 和 CSS")]),s._v(" "),a("h3",{attrs:{id:"优缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优缺点"}},[s._v("#")]),s._v(" 优缺点")]),s._v(" "),a("p",[a("strong",[s._v("优点")])]),s._v(" "),a("ul",[a("li",[s._v("能100%解决css无作用域样式污染问题")]),s._v(" "),a("li",[s._v("学习成本低：API简洁到几乎零学习成本")])]),s._v(" "),a("p",[a("strong",[s._v("缺点")])]),s._v(" "),a("ul",[a("li",[s._v("写法没有传统开发流程，如果你不想频繁的输入 "),a("code",[s._v("styles.**")]),s._v("，可以试一下 [react-css-modules]("),a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//github.com/gajus/react-css-modules",target:"_blank",rel:"noopener noreferrer"}},[s._v("gajus/react-css-modules · GitHub"),a("OutboundLink")],1),s._v(")，它通过高阶函数的形式来避免重复输入 "),a("code",[s._v("styles.**")])]),s._v(" "),a("li",[s._v("没有变量，通常要结合预处理器")]),s._v(" "),a("li",[s._v("代码可读性差，hash值不方便debug")])]),s._v(" "),a("p",[s._v("css modules通常结合less等预处理器在react中使用，更多可参考"),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/20495964",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSS Modules 详解及 React 中实践"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"三、css-in-js-styled-components、radium"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、css-in-js-styled-components、radium"}},[s._v("#")]),s._v(" 三、CSS in JS(styled-components、Radium)")]),s._v(" "),a("h3",{attrs:{id:"简介-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介-3"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("p",[a("code",[s._v("CSS in JS")]),s._v("是2014年推出的一种"),a("strong",[s._v("设计模式")]),s._v("，它的核心思想是"),a("code",[s._v("把CSS直接写到各自组件中")]),s._v("，也就是说"),a("code",[s._v("用JS去写CSS")]),s._v("，而不是单独的样式文件里")]),s._v(" "),a("p",[s._v("这跟传统的前端开发思维不一样，传统的原则是"),a("code",[s._v("关注点分离")]),s._v("，如常说的"),a("code",[s._v("不写行内样式")]),s._v("、"),a("code",[s._v("不写行内脚本")]),s._v("，如下代码")]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("h1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token style-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("style")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),a("span",{pre:!0,attrs:{class:"token style language-css"}},[a("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("red"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("46px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])])]),s._v("  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("onclick")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("alert("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("'")]),s._v("Hi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("'")]),s._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  Hello World\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("code",[s._v("CSS-in-JS")]),s._v("不是一种很新的技术，可是它在国内普及度好像并不是很高，它当初的出现是因为一些"),a("code",[s._v("component-based")]),s._v("的"),a("code",[s._v("Web")]),s._v("框架（例如 "),a("code",[s._v("React")]),s._v("，"),a("code",[s._v("Vue")]),s._v(" 和 "),a("code",[s._v("Angular")]),s._v("）的逐渐流行，使得开发者也想"),a("code",[s._v("将组件的CSS样式也一块封装到组件中去")]),s._v("以"),a("strong",[s._v("解决原生CSS写法的一系列问题")])]),s._v(" "),a("blockquote",[a("p",[s._v("CSS-in-JS在"),a("code",[s._v("React社区")]),s._v("的热度是最高的，这是因为React本身不会管用户怎么去为组件定义样式的问题，而Vue和Angular都有属于框架自己的一套定义样式的方案")])]),s._v(" "),a("p",[s._v("上面的例子使用 "),a("code",[s._v("React")]),s._v(" 改写如下")]),s._v(" "),a("div",{staticClass:"language-jsx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" style "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'color'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'red'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fontSize'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'46px'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("clickHandler")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hi'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n\nReactDOM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("h1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("style")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("onclick")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("clickHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n     Hello, world!\n  ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'example'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("上面代码在一个文件里面，封装了"),a("strong",[s._v("结构、样式和逻辑")]),s._v("，完全"),a("code",[s._v('违背了"关注点分离"的原则')])]),s._v(" "),a("p",[s._v("但是，这"),a("code",[s._v("有利于组件的隔离")]),s._v('。每个组件包含了所有需要用到的代码，不依赖外部，组件之间没有耦合，很方便复用。所以，随着 React 的走红和组件模式深入人心，这种"'),a("code",[s._v("关注点混合")]),s._v('"的新写法逐渐成为主流')]),s._v(" "),a("h3",{attrs:{id:"实现css-in-js的库汇总"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现css-in-js的库汇总"}},[s._v("#")]),s._v(" 实现CSS in JS的库汇总")]),s._v(" "),a("p",[s._v("实现了"),a("code",[s._v("CSS-in-JS")]),s._v("的库有很多，"),a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//github.com/MicheleBertoli/css-in-js",target:"_blank",rel:"noopener noreferrer"}},[s._v("据统计"),a("OutboundLink")],1),s._v("现在已经超过了61种。虽然每个库解决的问题都差不多，可是它们的实现方法和语法却大相径庭")]),s._v(" "),a("p",[s._v("从实现方法上区分大体分为两种：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("唯一CSS选择器")]),s._v("，代表库："),a("a",{attrs:{href:"https://github.com/styled-components/styled-components",target:"_blank",rel:"noopener noreferrer"}},[s._v("styled-components"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("code",[s._v("内联样式")]),s._v("（Unique Selector VS Inline Styles）")])]),s._v(" "),a("p",[s._v("不同的"),a("code",[s._v("CSS in JS")]),s._v("实现除了生成的"),a("code",[s._v("CSS样式和编写语法")]),s._v("有所区别外，它们实现的功能也不尽相同，除了一些最基本的诸如CSS局部作用域的功能，下面这些功能有的实现会包含而有的却不支持：")]),s._v(" "),a("ul",[a("li",[s._v("自动生成浏览器引擎前缀 - built-in vendor prefix")]),s._v(" "),a("li",[s._v("支持抽取独立的CSS样式表 - extract css file")]),s._v(" "),a("li",[s._v("自带支持动画 - built-in support for animations")]),s._v(" "),a("li",[s._v("伪类 - pseudo classes")]),s._v(" "),a("li",[s._v("媒体查询 - media query")]),s._v(" "),a("li",[s._v("其他")])]),s._v(" "),a("h3",{attrs:{id:"styled-components示例-也可查看react脚手架组件化开发blog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#styled-components示例-也可查看react脚手架组件化开发blog"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://github.com/styled-components/styled-components",target:"_blank",rel:"noopener noreferrer"}},[s._v("styled-components"),a("OutboundLink")],1),s._v("示例(也可查看react脚手架组件化开发blog)")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/styled-components/styled-components",target:"_blank",rel:"noopener noreferrer"}},[s._v("Styled-components"),a("OutboundLink")],1),s._v(" 是"),a("code",[s._v("CSS in JS")]),s._v("最热门的一个库了，到目前为止github的star数已经超过了"),a("code",[s._v("35k")])]),s._v(" "),a("p",[s._v("通过"),a("code",[s._v("styled-components")]),s._v("，可以使用ES6的"),a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals",target:"_blank",rel:"noopener noreferrer"}},[s._v("标签模板字符串"),a("OutboundLink")],1),s._v("语法（Tagged Templates）为需要"),a("code",[s._v("styled")]),s._v("的"),a("code",[s._v("Component")]),s._v("定义一系列"),a("code",[s._v("CSS")]),s._v("属性")]),s._v(" "),a("p",[s._v("当该组件的"),a("code",[s._v("JS代码被解析执行")]),s._v("的时候，"),a("code",[s._v("styled-components会动态生成一个CSS选择器")]),s._v("，并把对应的"),a("code",[s._v("CSS")]),s._v("样式通过"),a("code",[s._v("style")]),s._v("标签的形式插入到"),a("code",[s._v("head")]),s._v("标签里面。动态生成的"),a("code",[s._v("CSS")]),s._v("选择器会有一小段"),a("code",[s._v("哈希值来保证全局唯一性")]),s._v("来避免样式发生冲突")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//www.cssinjsplayground.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSS-in-JS Playground"),a("OutboundLink")],1),s._v("是一个可以快速尝试不同CSS-in-JS实现的网站，上面有一个简单的用"),a("code",[s._v("styled-components")]),s._v("实现表单的例子；")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/10/21/x6qhtA.png",alt:"x6qhtA.png"}})]),s._v(" "),a("p",[a("code",[s._v("styled-components")]),s._v("不需要你为需要设置样式的DOM节点设置一个"),a("code",[s._v("样式名")]),s._v("，使用完标签模板字符串定义后你会得到一个"),a("code",[s._v("styled")]),s._v("好的"),a("code",[s._v("Component")]),s._v("，直接在"),a("code",[s._v("JSX")]),s._v("中使用这个"),a("code",[s._v("Component")]),s._v("就可以了")]),s._v(" "),a("h3",{attrs:{id:"radium示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#radium示例"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://formidable.com/open-source/radium/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Radium"),a("OutboundLink")],1),s._v("示例")]),s._v(" "),a("p",[a("code",[s._v("Radium")]),s._v("和"),a("code",[s._v("styled-components")]),s._v("的最大区别是它生成的是"),a("code",[s._v("标签内联样式（inline styles）")])]),s._v(" "),a("p",[s._v("由于标签内联样式在处理诸如"),a("code",[s._v("media query")]),s._v("以及"),a("code",[s._v(":hover")]),s._v("，"),a("code",[s._v(":focus")]),s._v("，"),a("code",[s._v(":active")]),s._v("等和浏览器状态相关的样式的时候非常不方便，所以"),a("code",[s._v("radium")]),s._v("为这些样式封装了一些标准的接口以及抽象")]),s._v(" "),a("p",[s._v("再来看一下"),a("code",[s._v("radium")]),s._v("在"),a("a",{attrs:{href:"https://www.cssinjsplayground.com/?activeModule=index&library=radium",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSS-in-JS Playground"),a("OutboundLink")],1),s._v("的例子：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/10/21/x6qL7Q.png",alt:"x6qL7Q.png"}})]),s._v(" "),a("p",[s._v("从上面的例子可以看出"),a("code",[s._v("radium")]),s._v("定义样式的语法和"),a("code",[s._v("styled-components")]),s._v("有很大的区别，它要求你"),a("strong",[s._v("使用"),a("code",[s._v("style")]),s._v("属性为"),a("code",[s._v("DOM")]),s._v("添加相应的样式")])]),s._v(" "),a("p",[a("strong",[s._v("直接在标签内生成内联样式")]),s._v("，内联样式相比于CSS选择器的方法有以下的优点： "),a("code",[s._v("自带局部样式作用域的效果")]),s._v("，无需额外的操作")]),s._v(" "),a("h3",{attrs:{id:"css-in-js-与-css-预处理器-比如-less-和-sass-包括-postcss-有什么区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-in-js-与-css-预处理器-比如-less-和-sass-包括-postcss-有什么区别"}},[s._v("#")]),s._v(' CSS in JS 与"CSS 预处理器"（比如 Less 和 '),a("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2012/06/sass.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Sass"),a("OutboundLink")],1),s._v("，包括 PostCSS）有什么区别")]),s._v(" "),a("p",[a("code",[s._v("CSS in JS")]),s._v(" 使用 "),a("code",[s._v("JavaScript")]),s._v(" 的语法，"),a("strong",[s._v("是 JavaScript 脚本的一部分")]),s._v("，不用从头学习一套专用的 API，也不会多一道编译步骤，但是通常会在运行时动态生成CSS，造成一定运行时开销")]),s._v(" "),a("h3",{attrs:{id:"优缺点分析-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优缺点分析-2"}},[s._v("#")]),s._v(" 优缺点分析")]),s._v(" "),a("p",[a("strong",[s._v("优点")])]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("没有无作用域问题样式污染问题")])]),s._v(" "),a("p",[s._v("通过唯一CSS选择器或者行内样式解决")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("没有无用的CSS样式堆积问题")])]),s._v(" "),a("p",[s._v("CSS-in-JS会把样式和组件绑定在一起，当这个组件要被删除掉的时候，直接把这些代码删除掉就好了，不用担心删掉的样式代码会对项目的其他组件样式产生影响。而且由于CSS是写在JavaScript里面的，我们还可以利用JS显式的变量定义，模块引用等语言特性来追踪样式的使用情况，这大大方便了我们对样式代码的更改或者重构")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("更好的基于状态的样式定义")])]),s._v(" "),a("p",[s._v("CSS-in-JS会直接将CSS样式写在JS文件里面，所以样式复用以及逻辑判断都十分方便")])])]),s._v(" "),a("p",[a("strong",[s._v("缺点")])]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("一定的学习成本")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("代码可读性差")])]),s._v(" "),a("p",[s._v("大多数CSS-in-JS实现会通过生成唯一的CSS选择器来达到CSS局部作用域的效果。这些自动生成的选择器会大大降低代码的可读性，给开发人员debug造成一定的影响")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("运行时消耗")])]),s._v(" "),a("p",[s._v("由于大多数的CSS-in-JS的库都是在动态生成CSS的。这会有两方面的影响。首先你发送到客户端的代码会包括使用到的CSS-in-JS运行时（runtime）代码，这些代码一般都不是很小，例如styled-components的runtime大小是"),a("code",[s._v("12.42kB min + gzip")]),s._v("，如果你希望你首屏加载的代码很小，你得考虑这个问题。其次大多数CSS-in-JS实现都是在客户端动态生成CSS的，这就意味着会有一定的性能代价。不同的CSS-in-JS实现由于具体的实现细节不一样，所以它们的性能也会有很大的区别，你可以通过"),a("a",{attrs:{href:"https://link.zhihu.com/?target=http%3A//necolas.github.io/react-native-web/benchmarks/",target:"_blank",rel:"noopener noreferrer"}},[s._v("这个工具"),a("OutboundLink")],1),s._v("来查看和衡量各个实现的性能差异")])]),s._v(" "),a("li",[a("p",[s._v("不能结合成熟的CSS预处理器（或后处理器）Sass/Less/PostCSS，"),a("code",[s._v(":hover")]),s._v(" 和 "),a("code",[s._v(":active")]),s._v(" 伪类处理起来复杂")])])]),s._v(" "),a("blockquote",[a("p",[s._v("可以看到优点多，缺点也不少，选择需慎重，更多可阅读阮一峰老师写的"),a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2017/04/css_in_js.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSS in JS简介"),a("OutboundLink")],1),s._v("，"),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/103522819",target:"_blank",rel:"noopener noreferrer"}},[s._v("知乎CSS in JS的好与坏"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"四、预处理器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、预处理器"}},[s._v("#")]),s._v(" 四、预处理器")]),s._v(" "),a("h3",{attrs:{id:"简介-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介-4"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("p",[a("strong",[s._v("CSS 预处理器")]),s._v("是一个能让你通过预处理器自己独有的语法的程序")]),s._v(" "),a("p",[s._v("市面上有很多CSS预处理器可供选择，且绝大多数CSS预处理器"),a("strong",[s._v("会增加一些原生CSS不具备的特性")]),s._v("，例如")]),s._v(" "),a("ul",[a("li",[s._v("代码混合")]),s._v(" "),a("li",[s._v("嵌套选择器")]),s._v(" "),a("li",[s._v("继承选择器")])]),s._v(" "),a("p",[s._v("这些特性让CSS的结构"),a("code",[s._v("更加具有可读性且易于维护")])]),s._v(" "),a("p",[s._v("要使用CSS预处理器，你必须在web服务中安装CSS"),a("code",[s._v("编译工具")])]),s._v(" "),a("p",[s._v("我们常见的预处理器：")]),s._v(" "),a("ul",[a("li",[a("strong",[a("a",{attrs:{href:"https://sass-lang.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Sass"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("strong",[a("a",{attrs:{href:"https://lesscss.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("LESS"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("strong",[a("a",{attrs:{href:"http://stylus-lang.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Stylus"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("strong",[a("a",{attrs:{href:"http://postcss.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PostCSS"),a("OutboundLink")],1)])])]),s._v(" "),a("h3",{attrs:{id:"优缺点分析-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优缺点分析-3"}},[s._v("#")]),s._v(" 优缺点分析")]),s._v(" "),a("p",[a("strong",[s._v("优点")])]),s._v(" "),a("ol",[a("li",[s._v("利用嵌套，人为严格遵守嵌套首类名不一致，可以解决无作用域样式污染问题")]),s._v(" "),a("li",[s._v("可读性好，一目了然是那个dom节点，对于无用css删除，删除了相应dom节点后，对应的css也能比较放心的删除，不会影响到其他元素样式")])]),s._v(" "),a("p",[a("strong",[s._v("缺点")])]),s._v(" "),a("ol",[a("li",[s._v("需要借助相关的编译工具处理")])]),s._v(" "),a("blockquote",[a("p",[s._v("预处理器是现代web开发中必备，"),a("code",[s._v("结合BEM规范")]),s._v("，利用预处理器，可以极大的"),a("code",[s._v("提高开发效率，可读性，复用性")])])]),s._v(" "),a("h2",{attrs:{id:"五、shadow-dom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、shadow-dom"}},[s._v("#")]),s._v(" 五、Shadow DOM")]),s._v(" "),a("h3",{attrs:{id:"简介-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介-5"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("p",[s._v("熟悉"),a("code",[s._v("web Components")]),s._v("的一定知道"),a("code",[s._v("Shadow DOM")]),s._v("可以实现样式隔离，由浏览器原生支持")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/10/21/x6XeOK.png",alt:"x6XeOK.png"}})]),s._v(" "),a("p",[s._v("我们经常在微前端领域看到"),a("code",[s._v("Shadow DOM")]),s._v("，如下创建一个子应用")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" shadow "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#hostElement'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("attachShadow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'open'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nshadow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerHTML "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'<sub-app>Here is some new text</sub-app><link rel="stylesheet" href="//unpkg.com/antd/antd.min.css">\'')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("由于子应用的样式作用域仅在 "),a("code",[s._v("shadow")]),s._v(" 元素下，那么一旦子应用中出现运行时越界跑到外面构建 DOM 的场景，必定会导致构建出来的 DOM 无法应用子应用的样式的情况。")]),s._v(" "),a("p",[s._v("比如 "),a("code",[s._v("sub-app")]),s._v(" 里调用了 "),a("code",[s._v("antd modal")]),s._v(" 组件，由于 "),a("code",[s._v("modal")]),s._v(" 是动态挂载到 "),a("code",[s._v("document.body")]),s._v(" 的，而由于 "),a("code",[s._v("Shadow DOM")]),s._v(" 的特性 "),a("code",[s._v("antd")]),s._v(" 的样式只会在 "),a("code",[s._v("shadow")]),s._v(" 这个作用域下生效，结果就是弹出框无法应用到 "),a("code",[s._v("antd")]),s._v(" 的样式。解决的办法是把 "),a("code",[s._v("antd")]),s._v(" 样式上浮一层，丢到主文档里，但这么做意味着子应用的样式直接泄露到主文档了")]),s._v(" "),a("h3",{attrs:{id:"优缺点分析-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优缺点分析-4"}},[s._v("#")]),s._v(" 优缺点分析")]),s._v(" "),a("p",[a("strong",[s._v("优点")])]),s._v(" "),a("ul",[a("li",[s._v("浏览器原生支持")]),s._v(" "),a("li",[s._v("严格意义上的样式隔离，如iframe一样")])]),s._v(" "),a("p",[a("strong",[s._v("缺点")])]),s._v(" "),a("ul",[a("li",[s._v("浏览器兼容问题")]),s._v(" "),a("li",[s._v("只对一定范围内的dom结构起作用，上面微前端场景已经说明")])]),s._v(" "),a("blockquote",[a("p",[s._v("普通业务开发我们还是用框架、如Vue、React；Shadow DOM适用于特殊场景，如微前端")])]),s._v(" "),a("h2",{attrs:{id:"六、vue-scoped"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、vue-scoped"}},[s._v("#")]),s._v(" 六、vue scoped")]),s._v(" "),a("p",[s._v("当 "),a("code",[s._v("<style>")]),s._v(" 标签有 "),a("code",[s._v("scoped")]),s._v(" 属性时，它的 "),a("code",[s._v("CSS")]),s._v(" 只作用于当前组件中的元素")]),s._v(" "),a("p",[s._v("通过使用 "),a("strong",[a("code",[s._v("PostCSS")])]),s._v(" 来实现以下转换：")]),s._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scoped")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token style"}},[a("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".example")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hi"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("转换结果：")]),s._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token style"}},[a("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".example[data-v-f3f3eg9]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("data-v-f3f3eg9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hi"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("scoped")]),s._v(" 后，"),a("strong",[s._v("父组件的样式将不会渗透到子组件中")])]),s._v(" "),a("p",[s._v("不过一个"),a("strong",[s._v("子组件的根节点会同时受其父组件的 scoped CSS 和子组件的 scoped CSS 的影响")]),s._v("。这样设计是为了让父组件可以从布局的角度出发，调整其子组件根元素的样式，父租价利用"),a("code",[s._v("深度作用选择器")]),s._v("影响子组件样式")]),s._v(" "),a("p",[s._v("可以使用 "),a("code",[s._v(">>>")]),s._v(" 操作符：")]),s._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scoped")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token style"}},[a("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".a >>> .b")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* ... */")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("上述代码将会编译成：")]),s._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v(".a[data-v-f3f3eg9] .b { /* ... */ }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("有些像 "),a("code",[s._v("Sass")]),s._v(" 之类的预处理器无法正确解析 "),a("code",[s._v(">>>")]),s._v("。这种情况下你可以使用 "),a("code",[s._v("/deep/")]),s._v(" 或 "),a("code",[s._v("::v-deep")]),s._v(" 操作符取而代之——两者都是 "),a("code",[s._v(">>>")]),s._v(" 的别名，同样可以正常工作")]),s._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("p",[s._v("六种方案对比如下，社区通常的样式隔离方案，以下两种")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("BEM+预处理器")])]),s._v(" "),a("li",[a("code",[s._v("CSS Moduls + 预处理器")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2022/10/21/x6Xvhd.png",alt:"x6Xvhd.png"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);